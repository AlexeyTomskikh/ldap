@{
    //Layout = "~/Views/Shared/Layout.cshtml";
}


<center>
    @*<div>
            @using (Html.BeginForm("Reservation", "Logic", FormMethod.Post))
            {
                <h2>Добавить мероприятие:</h2>
                //<h2>@ViewBag.Message</h2>

                <table border="0" cellspacing="0" cellpadding="2" style="background-color:#E6E6FA; color:#000000">
                    <tr>
                        <th>Название</th>
                        <th><p>Дата начала:</p></th>
                        <th>Дата конца</th>
                        <td></td>
                    </tr>
                    <tr>
                        <td align="center">@Html.TextBox("NameEvent")</td>
                        <td align="center">@Html.TextBox("StartEvent")</td>
                        <td align="center">@Html.TextBox("EndEvent")</td>
                        <td align="center">@Html.ValidationSummary()<p><input type="submit" value="Забронировать" /></p></td>
                    </tr>
                </table>
            }

        </div>*@

    @* ========================================= *@

    <script type="text/javascript">
        function OnSuccess(data) {
            var results = $('#results'); // получаем нужный элемент
            results.empty(); //очищаем элемент
            results.append('<li>' + data + '</li>'); // добавляем данные в список

        }

        function AddEvent() {
           // var name_event = NameEvent: $('#NameEvent').val();
            var formData = {
                NameEvent: $('#NameEvent').val(),
                StartEvent: $('#StartEvent').val(),
                EndEvent: $('#EndEvent').val()
            }

            $.ajax({
                type: 'POST',
                url: "@Url.Action("AddNewEvent" , "Logic")",
                contentType: 'application/json; charset=utf-8',
                data: JSON.stringify(formData),
                dataType: 'json',
                //contentType: false,
                processData: false,
                success: function (data) {

                    loadEventsOfDay(data) // при успешном запросе список событий в этот день обновляется
                    // ShowEventsInTable(name_event),
                    //alert(data);
                    jQuery('.form').trigger('reset');
                },
                error: function () {
                    alert('Ошибка! Добавление невозможно. Проверьте соединение с интернетом!');
                }

            });
        }
    </script>

    <div>
        @using (Ajax.BeginForm("AddNewEvent", "Logic", new AjaxOptions
        {

            InsertionMode = InsertionMode.InsertAfter,
            OnSuccess = "OnSuccess",


        }))
        {     
            <h2>Добавить мероприятие</h2>
    <table class="table-striped table-bordered table-bordered table-hover table-condensed" align="center">

        <tr>
            <td>@Html.Label("Событие:")</td>
            <td>@Html.Label("Начало:")</td>
            <td>@Html.Label("Конец:")</td>
        </tr>

        <tr>
            <td><input class="form" type="text" name="NameEvent" id="NameEvent" /></td>
            <td><input name="StartEvent" id="StartEvent" type="text"></td>
            <td><input name="EndEvent" id="EndEvent" type="text"></td>
            <td><input a class="btn btn-default" role="button" type="button" onclick="AddEvent()" value="Добавить" /></td>
        </tr>
    </table>
        }
    </div>
</center>



















@*<div>

        @using (Html.BeginForm("Reservation", "Logic", FormMethod.Post))
        {
            <p>Название мероприятия: </p>


            @Html.TextBox("NameEvent")
            <p>Начало:</p>
            @Html.TextBox("StartEvent")

            <p>Конец:</p>
            @Html.TextBox("EndEvent")

            @Html.ValidationSummary("StartEvent")
            <p><input type="submit" value="Забронировать" /></p>
        }
    </div>*@
